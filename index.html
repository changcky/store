---
layout: default
title: æˆ‘çš„é¡¹ç›® HTML é¡µé¢åˆ—è¡¨
---
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title }}</title>
    <style>
        body {
            font-family: sans-serif;
            line-height: 1.6;
            margin: 20px;
        }
        h1 {
            color: #333;
        }
        /* æœç´¢æ¡†æ ·å¼ */
        .search-container {
            margin: 20px 0;
            width: 100%;
            max-width: 600px;
        }
        #search-input {
            width: 70%;
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        #search-button {
            padding: 10px 15px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        #search-button:hover {
            background-color: #0056b3;
        }
        #search-results {
            margin-top: 20px;
            border-top: 1px solid #eee;
            padding-top: 20px;
            display: none;
        }
        #search-results h2 {
            color: #333;
            margin-bottom: 10px;
        }
        #results-list {
            list-style-type: none;
            padding-left: 0;
        }
        #results-list li {
            margin: 10px 0;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        #results-list li a {
            color: #007bff;
            text-decoration: none;
            font-weight: bold;
        }
        #results-list li a:hover {
            text-decoration: underline;
        }
        #results-list .result-path {
            color: #6c757d;
            font-size: 14px;
            margin-top: 5px;
        }
        #results-list .result-snippet {
            margin-top: 5px;
            font-size: 14px;
        }
        #no-results {
            color: #dc3545;
            display: none;
            margin-top: 20px;
        }
        /* ç›®å½•æ ‘æ ·å¼ */
        .file-tree {
            list-style-type: none;
            padding-left: 0;
        }
        .file-tree li {
            margin: 5px 0;
        }
        .file-tree ul {
            list-style-type: none;
            padding-left: 20px;
            margin-top: 5px;
            display: none; /* é»˜è®¤éšè—å­ç›®å½• */
        }
        .file-tree .directory {
            cursor: pointer;
            user-select: none;
            color: #333;
            font-weight: bold;
        }
        .file-tree .directory:before {
            content: "ğŸ“ ";
            margin-right: 5px;
        }
        .file-tree .directory.open:before {
            content: "ğŸ“‚ "; /* æ‰“å¼€çš„æ–‡ä»¶å¤¹å›¾æ ‡ */
        }
        .file-tree .file a {
            color: #007bff;
            text-decoration: none;
            margin-left: 20px;
        }
        .file-tree .file:before {
            content: "ğŸ“„ ";
            margin-right: 5px;
        }
        .file-tree .file a:hover {
            text-decoration: underline;
        }
        /* å±•å¼€/æŠ˜å å›¾æ ‡ */
        .toggle-icon {
            display: inline-block;
            width: 16px;
            height: 16px;
            margin-right: 5px;
            text-align: center;
            line-height: 14px;
            font-size: 14px;
            border: 1px solid #ccc;
            border-radius: 2px;
            cursor: pointer;
        }
        /* é«˜äº®æœç´¢ç»“æœ */
        .highlight {
            background-color: yellow;
            font-weight: bold;
        }
        /* åˆ‡æ¢è§†å›¾æŒ‰é’® */
        .view-toggle {
            margin: 20px 0;
        }
        .view-toggle button {
            padding: 8px 12px;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }
        .view-toggle button.active {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
        }
        #file-tree-view, #search-view {
            margin-top: 20px;
        }
        #search-view {
            display: none;
        }
    </style>
</head>
<body>
    <h1>æ¬¢è¿è®¿é—®æˆ‘çš„é¡¹ç›®é¡µé¢</h1>
    
    <!-- åˆ‡æ¢è§†å›¾æŒ‰é’® -->
    <div class="view-toggle">
        <button id="tree-view-btn" class="active">æ–‡ä»¶ç›®å½•</button>
        <button id="search-view-btn">æœç´¢é¡µé¢</button>
    </div>
    
    <!-- æ–‡ä»¶æ ‘è§†å›¾ -->
    <div id="file-tree-view">
        <p>è¯·ç‚¹å‡»ç›®å½•å±•å¼€æŸ¥çœ‹ä¸åŒçš„ HTML é¡µé¢:</p>
        <ul class="file-tree" id="file-tree">
            <!-- æ­¤å¤„å°†ç”± JavaScript åŠ¨æ€ç”Ÿæˆç›®å½•ç»“æ„ -->
        </ul>
    </div>
    
    <!-- æœç´¢è§†å›¾ -->
    <div id="search-view">
        <div class="search-container">
            <input type="text" id="search-input" placeholder="è¾“å…¥å…³é”®è¯æœç´¢é¡µé¢...">
            <button id="search-button">æœç´¢</button>
        </div>
        
        <div id="no-results">æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„ç»“æœ</div>
        
        <div id="search-results">
            <h2>æœç´¢ç»“æœ</h2>
            <ul id="results-list">
                <!-- æœç´¢ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
            </ul>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // å­˜å‚¨æ‰€æœ‰é¡µé¢ä¿¡æ¯
            const allPages = [
                {% for page in site.html_pages %}
                    {% unless page.url == '/index.html' or page.url == '/' %}
                    {
                        url: "{{ site.baseurl }}{{ page.url }}",
                        title: "{{ page.title | default: page.path }}",
                        path: "{{ page.path }}",
                        content: "" // å†…å®¹å°†é€šè¿‡AJAXåŠ è½½
                    },
                    {% endunless %}
                {% endfor %}
            ];
            
            // åˆ›å»ºç›®å½•æ ‘ç»“æ„
            const fileTree = {};
            
            // å¤„ç†æ¯ä¸ªé¡µé¢ï¼Œæ„å»ºç›®å½•æ ‘
            allPages.forEach(page => {
                // åˆ†å‰²è·¯å¾„
                let pathParts = page.path.split('/');
                let fileName = pathParts.pop(); // æœ€åä¸€éƒ¨åˆ†æ˜¯æ–‡ä»¶å
                
                // ä»æ ¹ç›®å½•å¼€å§‹
                let currentLevel = fileTree;
                
                // æ„å»ºç›®å½•ç»“æ„
                pathParts.forEach(folder => {
                    if (folder) { // é¿å…ç©ºæ–‡ä»¶å¤¹å
                        if (!currentLevel[folder]) {
                            currentLevel[folder] = {};
                        }
                        currentLevel = currentLevel[folder];
                    }
                });
                
                // æ·»åŠ æ–‡ä»¶åˆ°å½“å‰ç›®å½•çº§åˆ«
                if (!currentLevel._files) {
                    currentLevel._files = [];
                }
                currentLevel._files.push({
                    name: fileName,
                    url: page.url,
                    title: page.title
                });
            });
            
            // æ¸²æŸ“ç›®å½•æ ‘åˆ°DOM
            const fileTreeElement = document.getElementById('file-tree');
            
            // é€’å½’æ¸²æŸ“ç›®å½•ç»“æ„
            function renderDirectory(container, directory, path = '') {
                // éå†ç›®å½•ä¸­çš„æ–‡ä»¶å¤¹
                Object.keys(directory).forEach(key => {
                    if (key !== '_files') {
                        const dirPath = path ? `${path}/${key}` : key;
                        const dirLi = document.createElement('li');
                        
                        // åˆ›å»ºç›®å½•é¡¹
                        const folderSpan = document.createElement('span');
                        folderSpan.textContent = key;
                        folderSpan.className = 'directory';
                        folderSpan.setAttribute('data-path', dirPath);
                        
                        // æ·»åŠ å±•å¼€/æŠ˜å å›¾æ ‡
                        const toggleIcon = document.createElement('span');
                        toggleIcon.className = 'toggle-icon';
                        toggleIcon.textContent = '+';
                        folderSpan.prepend(toggleIcon);
                        
                        dirLi.appendChild(folderSpan);
                        
                        // åˆ›å»ºå­é¡¹å®¹å™¨
                        const subUl = document.createElement('ul');
                        dirLi.appendChild(subUl);
                        
                        // æ·»åŠ ç‚¹å‡»äº‹ä»¶å¤„ç†
                        folderSpan.addEventListener('click', function() {
                            this.classList.toggle('open');
                            if (this.classList.contains('open')) {
                                toggleIcon.textContent = '-';
                                subUl.style.display = 'block';
                            } else {
                                toggleIcon.textContent = '+';
                                subUl.style.display = 'none';
                            }
                        });
                        
                        // é€’å½’æ¸²æŸ“å­ç›®å½•
                        renderDirectory(subUl, directory[key], dirPath);
                        
                        container.appendChild(dirLi);
                    }
                });
                
                // æ¸²æŸ“å½“å‰ç›®å½•ä¸­çš„æ–‡ä»¶
                if (directory._files) {
                    directory._files.forEach(file => {
                        const fileLi = document.createElement('li');
                        fileLi.className = 'file';
                        
                        const fileLink = document.createElement('a');
                        fileLink.href = file.url;
                        fileLink.textContent = file.title || file.name;
                        
                        fileLi.appendChild(fileLink);
                        container.appendChild(fileLi);
                    });
                }
            }
            
            // å¼€å§‹æ¸²æŸ“æ ¹ç›®å½•
            renderDirectory(fileTreeElement, fileTree);
            
            // å¦‚æœæ ¹ç›®å½•æ²¡æœ‰å­ç›®å½•ï¼Œç›´æ¥æ˜¾ç¤ºæ–‡ä»¶
            if (fileTree._files && Object.keys(fileTree).length === 1) {
                fileTree._files.forEach(file => {
                    const fileLi = document.createElement('li');
                    fileLi.className = 'file';
                    
                    const fileLink = document.createElement('a');
                    fileLink.href = file.url;
                    fileLink.textContent = file.title || file.name;
                    
                    fileLi.appendChild(fileLink);
                    fileTreeElement.appendChild(fileLi);
                });
            }
            
            // æœç´¢åŠŸèƒ½
            const searchInput = document.getElementById('search-input');
            const searchButton = document.getElementById('search-button');
            const searchResults = document.getElementById('search-results');
            const resultsList = document.getElementById('results-list');
            const noResults = document.getElementById('no-results');
            
            // é¢„åŠ è½½æ‰€æœ‰é¡µé¢å†…å®¹ï¼ˆå®é™…ä½¿ç”¨æ—¶å¯èƒ½éœ€è¦æŒ‰éœ€åŠ è½½ï¼‰
            function preloadPageContents() {
                allPages.forEach((page, index) => {
                    // æ¨¡æ‹ŸåŠ è½½é¡µé¢å†…å®¹ï¼ˆåœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œåº”è¯¥ä½¿ç”¨fetchæˆ–XMLHttpRequestï¼‰
                    // æ³¨æ„ï¼šè¿™éƒ¨åˆ†åœ¨å®é™…åº”ç”¨ä¸­éœ€è¦æ ¹æ®ä½ çš„ç½‘ç«™ç»“æ„è°ƒæ•´
                    setTimeout(() => {
                        // è¿™æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿï¼Œå®é™…ä½¿ç”¨æ—¶éœ€è¦æ›¿æ¢ä¸ºçœŸå®çš„AJAXè¯·æ±‚
                        fetch(page.url)
                            .then(response => response.text())
                            .then(html => {
                                // æå–çº¯æ–‡æœ¬å†…å®¹ï¼ˆå»é™¤HTMLæ ‡ç­¾ï¼‰
                                const tempDiv = document.createElement('div');
                                tempDiv.innerHTML = html;
                                allPages[index].content = tempDiv.textContent || tempDiv.innerText || '';
                            })
                            .catch(err => {
                                console.error('æ— æ³•åŠ è½½é¡µé¢å†…å®¹:', page.url, err);
                            });
                    }, index * 100); // é”™å¼€è¯·æ±‚æ—¶é—´ï¼Œé¿å…åŒæ—¶å‘é€è¿‡å¤šè¯·æ±‚
                });
            }
            
            // åœ¨é¡µé¢åŠ è½½åå¼€å§‹é¢„åŠ è½½å†…å®¹
            // preloadPageContents(); // åœ¨å®é™…åº”ç”¨ä¸­å–æ¶ˆæ³¨é‡Š
            
            // æœç´¢å‡½æ•°
            function performSearch() {
                const keyword = searchInput.value.trim().toLowerCase();
                
                if (!keyword) {
                    alert('è¯·è¾“å…¥æœç´¢å…³é”®è¯');
                    return;
                }
                
                // æ¸…ç©ºä¹‹å‰çš„ç»“æœ
                resultsList.innerHTML = '';
                
                // è¿‡æ»¤åŒ…å«å…³é”®è¯çš„é¡µé¢
                const results = allPages.filter(page => {
                    const titleMatch = page.title && page.title.toLowerCase().includes(keyword);
                    const pathMatch = page.path && page.path.toLowerCase().includes(keyword);
                    const contentMatch = page.content && page.content.toLowerCase().includes(keyword);
                    
                    return titleMatch || pathMatch || contentMatch;
                });
                
                if (results.length > 0) {
                    // æ˜¾ç¤ºæœç´¢ç»“æœ
                    results.forEach(page => {
                        const li = document.createElement('li');
                        
                        // åˆ›å»ºæ ‡é¢˜é“¾æ¥
                        const titleLink = document.createElement('a');
                        titleLink.href = page.url;
                        
                        // é«˜äº®æ ‡é¢˜ä¸­çš„å…³é”®è¯
                        const titleText = page.title || page.path.split('/').pop();
                        titleLink.innerHTML = highlightKeyword(titleText, keyword);
                        
                        li.appendChild(titleLink);
                        
                        // æ·»åŠ è·¯å¾„ä¿¡æ¯
                        const pathDiv = document.createElement('div');
                        pathDiv.className = 'result-path';
                        pathDiv.textContent = page.path;
                        li.appendChild(pathDiv);
                        
                        // æ·»åŠ å†…å®¹ç‰‡æ®µï¼ˆå¦‚æœæœ‰ï¼‰
                        if (page.content) {
                            const snippet = createSnippet(page.content, keyword);
                            if (snippet) {
                                const snippetDiv = document.createElement('div');
                                snippetDiv.className = 'result-snippet';
                                snippetDiv.innerHTML = snippet;
                                li.appendChild(snippetDiv);
                            }
                        }
                        
                        resultsList.appendChild(li);
                    });
                    
                    searchResults.style.display = 'block';
                    noResults.style.display = 'none';
                } else {
                    // æ²¡æœ‰æ‰¾åˆ°ç»“æœ
                    searchResults.style.display = 'none';
                    noResults.style.display = 'block';
                }
            }
            
            // åˆ›å»ºä¸Šä¸‹æ–‡ç‰‡æ®µ
            function createSnippet(text, keyword) {
                const lowerText = text.toLowerCase();
                const keywordPos = lowerText.indexOf(keyword.toLowerCase());
                
                if (keywordPos === -1) return null;
                
                // ç¡®å®šç‰‡æ®µçš„å¼€å§‹å’Œç»“æŸä½ç½®
                let start = Math.max(0, keywordPos - 50);
                let end = Math.min(text.length, keywordPos + keyword.length + 50);
                
                // è°ƒæ•´ä»¥é¿å…æˆªæ–­å•è¯
                while (start > 0 && text[start] !== ' ' && text[start] !== '\n') start--;
                while (end < text.length && text[end] !== ' ' && text[end] !== '\n') end++;
                
                // æå–ç‰‡æ®µå¹¶æ·»åŠ çœç•¥å·
                let snippet = '';
                if (start > 0) snippet += '...';
                snippet += text.substring(start, end);
                if (end < text.length) snippet += '...';
                
                // é«˜äº®å…³é”®è¯
                return highlightKeyword(snippet, keyword);
            }
            
            // é«˜äº®å…³é”®è¯
            function highlightKeyword(text, keyword) {
                if (!text) return '';
                
                const parts = text.split(new RegExp(`(${keyword})`, 'gi'));
                return parts.map(part => 
                    part.toLowerCase() === keyword.toLowerCase() 
                        ? `<span class="highlight">${part}</span>` 
                        : part
                ).join('');
            }
            
            // æ·»åŠ æœç´¢äº‹ä»¶ç›‘å¬å™¨
            searchButton.addEventListener('click', performSearch);
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
            
            // è§†å›¾åˆ‡æ¢åŠŸèƒ½
            const treeViewBtn = document.getElementById('tree-view-btn');
            const searchViewBtn = document.getElementById('search-view-btn');
            const fileTreeView = document.getElementById('file-tree-view');
            const searchView = document.getElementById('search-view');
            
            treeViewBtn.addEventListener('click', function() {
                fileTreeView.style.display = 'block';
                searchView.style.display = 'none';
                treeViewBtn.classList.add('active');
                searchViewBtn.classList.remove('active');
            });
            
            searchViewBtn.addEventListener('click', function() {
                fileTreeView.style.display = 'none';
                searchView.style.display = 'block';
                treeViewBtn.classList.remove('active');
                searchViewBtn.classList.add('active');
            });
            
            // æ¨¡æ‹Ÿæ•°æ®ç”¨äºæµ‹è¯•ï¼ˆå®é™…ä½¿ç”¨æ—¶è¯·åˆ é™¤ï¼‰
            // è¿™éƒ¨åˆ†ä»£ç ä»…ç”¨äºæ¼”ç¤ºï¼Œå®é™…ä½¿ç”¨æ—¶åº”è¯¥é€šè¿‡AJAXåŠ è½½çœŸå®å†…å®¹
            function simulatePageContents() {
                allPages.forEach((page, index) => {
                    // æ¨¡æ‹Ÿä¸€äº›å‡çš„å†…å®¹
                    allPages[index].content = `è¿™æ˜¯${page.title || page.path}çš„æ¨¡æ‹Ÿå†…å®¹ã€‚
                        è¿™ä¸ªé¡µé¢åŒ…å«äº†ä¸€äº›ç¤ºä¾‹æ–‡æœ¬ï¼Œç”¨äºæµ‹è¯•æœç´¢åŠŸèƒ½ã€‚
                        æ‚¨å¯ä»¥æœç´¢å…³é”®è¯æ¥æ‰¾åˆ°æ­¤é¡µé¢ã€‚
                        è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹HTMLé¡µé¢ï¼Œå±•ç¤ºäº†ä¸€äº›åŸºæœ¬çš„å†…å®¹ç»“æ„ã€‚`;
                });
            }
            
            // ä»…ç”¨äºæ¼”ç¤ºï¼Œå®é™…ä½¿ç”¨è¯·åˆ é™¤
            simulatePageContents();
        });
    </script>
</body>
</html>
